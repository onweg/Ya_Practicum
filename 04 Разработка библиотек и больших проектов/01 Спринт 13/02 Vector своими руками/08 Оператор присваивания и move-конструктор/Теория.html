<!DOCTYPE html>
<html>
<head>
  <title>Оператор присваивания и move-конструктор</title>
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
  <meta charset="utf-8">
<style>body{font-family:Helvetica,arial,sans-serif;font-size:14px;line-height:1.6;background-color:#fff;padding:30px;color:#333;max-width:1140px;margin:0 auto}body > :first-child{margin-top:0!important}body > :last-child{margin-bottom:0!important}a{color:#4183C4;text-decoration:none}a.absent{color:#c00}a.anchor{display:block;padding-left:30px;margin-left:-30px;cursor:pointer;position:absolute;top:0;left:0;bottom:0}h1,h2,h3,h4,h5,h6{margin:20px 0 10px;padding:0;font-weight:700;-webkit-font-smoothing:antialiased;cursor:text;position:relative}h2:first-child,h1:first-child,h1:first-child + h2,h3:first-child,h4:first-child,h5:first-child,h6:first-child{margin-top:0;padding-top:0}h1:hover a.anchor,h2:hover a.anchor,h3:hover a.anchor,h4:hover a.anchor,h5:hover a.anchor,h6:hover a.anchor{text-decoration:none}h1 tt,h1 code{font-size:inherit}h2 tt,h2 code{font-size:inherit}h3 tt,h3 code{font-size:inherit}h4 tt,h4 code{font-size:inherit}h5 tt,h5 code{font-size:inherit}h6 tt,h6 code{font-size:inherit}h1{font-size:28px;color:#000}h2{font-size:24px;border-bottom:1px solid #ccc;color:#000}h3{font-size:18px}h4{font-size:16px}h5{font-size:14px}h6{color:#777;font-size:14px}p,blockquote,ul,ol,dl,li,table,pre{margin:15px 0}hr {padding:0;margin-bottom:-8px;height:1px;border:none;background:black}body > h2:first-child{margin-top:0;padding-top:0}body > h1:first-child{margin-top:0;padding-top:0}body > h1:first-child + h2{margin-top:0;padding-top:0}body > h3:first-child,body > h4:first-child,body > h5:first-child,body > h6:first-child{margin-top:0;padding-top:0}a:first-child h1,a:first-child h2,a:first-child h3,a:first-child h4,a:first-child h5,a:first-child h6{margin-top:0;padding-top:0}h1 p,h2 p,h3 p,h4 p,h5 p,h6 p{margin-top:0}li p.first{display:inline-block}ul,ol{padding-left:30px}ul :first-child,ol :first-child{margin-top:0}ul :last-child,ol :last-child{margin-bottom:0}dl{padding:0}dl dt{font-size:14px;font-weight:700;font-style:italic;padding:0;margin:15px 0 5px}dl dt:first-child{padding:0}dl dt > :first-child{margin-top:0}dl dt > :last-child{margin-bottom:0}dl dd{margin:0 0 15px;padding:0 15px}dl dd > :first-child{margin-top:0}dl dd > :last-child{margin-bottom:0}blockquote{border-left:4px solid #ddd;padding:0 15px;color:#777}blockquote > :first-child{margin-top:0}blockquote > :last-child{margin-bottom:0}table{padding:0}table tr{border-top:1px solid #ccc;background-color:#fff;margin:0;padding:0}table tr:nth-child(2n){background-color:#f8f8f8}table tr th{font-weight:700;border:1px solid #ccc;text-align:left;margin:0;padding:6px 13px}table tr td{border:1px solid #ccc;text-align:left;margin:0;padding:6px 13px}table tr th :first-child,table tr td :first-child{margin-top:0}table tr th :last-child,table tr td :last-child{margin-bottom:0}img{max-width:100%;display:block}span.frame{display:block;overflow:hidden}span.frame > span{border:1px solid #ddd;display:block;float:left;overflow:hidden;margin:13px 0 0;padding:7px;width:auto}span.frame span img{display:block;float:left}span.frame span span{clear:both;color:#333;display:block;padding:5px 0 0}span.align-center{display:block;overflow:hidden;clear:both}span.align-center > span{display:block;overflow:hidden;margin:13px auto 0;text-align:center}span.align-center span img{margin:0 auto;text-align:center}span.align-right{display:block;overflow:hidden;clear:both}span.align-right > span{display:block;overflow:hidden;margin:13px 0 0;text-align:right}span.align-right span img{margin:0;text-align:right}span.float-left{display:block;margin-right:13px;overflow:hidden;float:left}span.float-left span{margin:13px 0 0}span.float-right{display:block;margin-left:13px;overflow:hidden;float:right}span.float-right > span{display:block;overflow:hidden;margin:13px auto 0;text-align:right}code,tt{margin:0 2px;padding:0 5px;white-space:nowrap;border:1px solid #eaeaea;background-color:#f8f8f8;border-radius:3px}pre code{margin:0;padding:0;white-space:pre;border:none;background:transparent}.highlight pre{background-color:#f8f8f8;border:1px solid #ccc;font-size:13px;line-height:19px;overflow:auto;padding:6px 10px;border-radius:3px}pre{background-color:#f8f8f8;border:1px solid #ccc;font-size:13px;line-height:19px;overflow:auto;padding:6px 10px;border-radius:3px}pre code,pre tt{background-color:transparent;border:none}.slasher{color:#000000}</style></head>
<body>

<h1>Оператор присваивания и move-конструктор</h1>

<p>В этом уроке вы реализуете перемещающий конструктор и операторы присваивания для класса <code>Vector</code>. Но сначала нужно навести порядок с конструкторами и операторами присваивания для класса <code>RawMemory</code>.</p>

<p>Класс <code>RawMemory</code> нарушает «правило трёх»‎ и «‎правило пяти»‎. Они говорят, что если класс имеет одну из следующих специальных функций-членов, то в нём, скорее всего, должны быть объявлены и остальные:</p>

<ul>
<li>конструктор копирования,</li>
<li>копирующий оператор присваивания,</li>
<li>деструктор,</li>
<li>конструктор перемещения,</li>
<li>перемещающий оператор присваивания.</li>
</ul>

<p>Действительно, в <code>RawMemory</code> объявлен лишь деструктор, освобождающий сырую память. Сгенерированные компилятором остальные функции-члены скопируют указатель <code>buffer_</code> и поле <code>capacity_</code>. Из-за этого несколько объектов <code>RawMemory</code> станут конкурировать за владение одной и той же областью памяти, что приведёт к неопределённому поведению при их разрушении.</p>

<p>Операция копирования не имеет смысла для класса <code>RawMemory</code>, так как у него нет информации о количестве находящихся в сырой памяти элементов. Копирование элементов определено для класса <code>Vector</code>, который использует сырую память для размещения элементов и знает об их количестве.</p>

<p>Поэтому конструктор копирования и копирующий оператор присваивания в классе <code>RawMemory</code> должны быть запрещены. Это исключит возможность их случайного вызова. Зато перемещающие конструктор и оператор присваивания классу <code>RawMemory</code> нужны:</p>

<pre><code class="language-cpp">template &lt;typename T&gt;
class RawMemory {
public:
    RawMemory(const RawMemory&amp;) = delete;
    RawMemory&amp; operator=(const RawMemory&amp; rhs) = delete;
    RawMemory(RawMemory&amp;&amp; other) noexcept { ... }
    RawMemory&amp; operator=(RawMemory&amp;&amp; rhs) noexcept { ... }
    ...
};
</code></pre>

<p>Перемещающие конструктор и оператор присваивания не выбрасывают исключений и выполняются за O(1).</p>

<p>Теперь обновлённый класс <code>RawMemory</code> можно применить, чтобы реализовать операции перемещения и присваивания класса <code>Vector</code>.</p>

<p>Move-конструктор класса <code>Vector</code> легко написать, если использовать соответствующий конструктор <code>RawMemory</code>. После перемещения новый вектор станет владеть данными исходного вектора. Исходный вектор будет иметь нулевой размер и вместимость и ссылаться на <code>nullptr</code>.</p>

<hr>

<p>Взгляните на код оператора присваивания, основанный на идиоме copy-and-swap:</p>

<pre><code class="language-cpp">template &lt;typename T&gt;
class Vector {
public:
    Vector&amp; operator=(const Vector&amp; rhs) {
        if (this != &amp;rhs) {
            Vector rhs_copy(rhs);
            Swap(rhs_copy);
        }
        return *this;
    }
    void Swap(Vector&amp; other) noexcept;
    ...
};
</code></pre>

<p>Какие недостатки у этой реализации оператора присваивания?</p>

<ul>
<li><p>В коде оператора присваивания есть утечки памяти.</p></li>

<li><p>Операция присваивания недостаточно эффективна.</p></li>

<li><p>Оператор присваивания небезопасен к возникновению исключений.</p></li>

<li><p>Код оператора присваивания вызывает неопределённое поведение.</p></li>
</ul>

<hr>

<p>При простом применении copy-and-swap вектор-приёмник будет каждый раз выделять динамическую память, даже если он уже достаточно вместителен.</p>

<p>Более оптимальная стратегия — применять copy-and-swap только когда вместимости вектора-приёмника не хватает, чтобы вместить все элементы вектора-источника:</p>

<pre><code class="language-cpp">template &lt;typename T&gt;
class Vector {
public:
    Vector&amp; operator=(const Vector&amp; rhs) {
        if (this != &amp;rhs) {
            if (rhs.size_ &gt; data_.Capacity()) {
                /* Применить copy-and-swap */
            } else {
                /* Скопировать элементы из rhs, создав при необходимости новые
                   или удалив существующие */
            }
        }
        return *this;
    }
    void Swap(Vector&amp; other) noexcept;
    ...
};
</code></pre>

<p>Когда вектор-приёмник может вместить все элементы вектора-источника, нужно обработать две ситуации.</p>

<ol>
<li>Размер вектора-источника меньше размера вектора-приёмника. Тогда нужно скопировать имеющиеся элементы из источника в приёмник, а избыточные элементы вектора-приёмника разрушить:</li>
</ol>

<p><img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTA3NyIgaGVpZ2h0PSI0NzMiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIG92ZXJmbG93PSJoaWRkZW4iPjxkZWZzPjxjbGlwUGF0aCBpZD0iY2xpcDAiPjxyZWN0IHg9Ii0xIiB5PSIyMjYiIHdpZHRoPSIxMDc3IiBoZWlnaHQ9IjQ3MyIvPjwvY2xpcFBhdGg+PC9kZWZzPjxnIGNsaXAtcGF0aD0idXJsKCNjbGlwMCkiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDEgLTIyNikiPjxyZWN0IHg9IjI0Ni41IiB5PSIzNjAuNSIgd2lkdGg9IjI2IiBoZWlnaHQ9IjI2IiBzdHJva2U9IiMyRjUyOEYiIHN0cm9rZS13aWR0aD0iMS4zMzMzMyIgc3Ryb2tlLW1pdGVybGltaXQ9IjgiIGZpbGw9IiM0NDcyQzQiLz48cmVjdCB4PSIyNzIuNSIgeT0iMzYwLjUiIHdpZHRoPSIyNyIgaGVpZ2h0PSIyNiIgc3Ryb2tlPSIjMkY1MjhGIiBzdHJva2Utd2lkdGg9IjEuMzMzMzMiIHN0cm9rZS1taXRlcmxpbWl0PSI4IiBmaWxsPSIjNDQ3MkM0Ii8+PHJlY3QgeD0iMjk5LjUiIHk9IjM2MC41IiB3aWR0aD0iMjYiIGhlaWdodD0iMjYiIHN0cm9rZT0iIzJGNTI4RiIgc3Ryb2tlLXdpZHRoPSIxLjMzMzMzIiBzdHJva2UtbWl0ZXJsaW1pdD0iOCIgZmlsbD0iIzQ0NzJDNCIvPjxyZWN0IHg9IjMyNS41IiB5PSIzNjAuNSIgd2lkdGg9IjI2IiBoZWlnaHQ9IjI2IiBzdHJva2U9IiMyRjUyOEYiIHN0cm9rZS13aWR0aD0iMS4zMzMzMyIgc3Ryb2tlLW1pdGVybGltaXQ9IjgiIGZpbGw9IiM0NDcyQzQiLz48cmVjdCB4PSIzNTEuNSIgeT0iMzYwLjUiIHdpZHRoPSIyNyIgaGVpZ2h0PSIyNiIgc3Ryb2tlPSIjMkY1MjhGIiBzdHJva2Utd2lkdGg9IjEuMzMzMzMiIHN0cm9rZS1taXRlcmxpbWl0PSI4IiBmaWxsPSIjRTdFNkU2Ii8+PHJlY3QgeD0iMzc4LjUiIHk9IjM2MC41IiB3aWR0aD0iMjYiIGhlaWdodD0iMjYiIHN0cm9rZT0iIzJGNTI4RiIgc3Ryb2tlLXdpZHRoPSIxLjMzMzMzIiBzdHJva2UtbWl0ZXJsaW1pdD0iOCIgZmlsbD0iI0U3RTZFNiIvPjxyZWN0IHg9IjQwNC41IiB5PSIzNjAuNSIgd2lkdGg9IjI3IiBoZWlnaHQ9IjI2IiBzdHJva2U9IiMyRjUyOEYiIHN0cm9rZS13aWR0aD0iMS4zMzMzMyIgc3Ryb2tlLW1pdGVybGltaXQ9IjgiIGZpbGw9IiNFN0U2RTYiLz48cmVjdCB4PSI0MzEuNSIgeT0iMzYwLjUiIHdpZHRoPSIyNiIgaGVpZ2h0PSIyNiIgc3Ryb2tlPSIjMkY1MjhGIiBzdHJva2Utd2lkdGg9IjEuMzMzMzMiIHN0cm9rZS1taXRlcmxpbWl0PSI4IiBmaWxsPSIjRTdFNkU2Ii8+PHJlY3QgeD0iNDU3LjUiIHk9IjM2MC41IiB3aWR0aD0iMjYiIGhlaWdodD0iMjYiIHN0cm9rZT0iIzJGNTI4RiIgc3Ryb2tlLXdpZHRoPSIxLjMzMzMzIiBzdHJva2UtbWl0ZXJsaW1pdD0iOCIgZmlsbD0iI0U3RTZFNiIvPjxyZWN0IHg9IjQ4My41IiB5PSIzNjAuNSIgd2lkdGg9IjI3IiBoZWlnaHQ9IjI2IiBzdHJva2U9IiMyRjUyOEYiIHN0cm9rZS13aWR0aD0iMS4zMzMzMyIgc3Ryb2tlLW1pdGVybGltaXQ9IjgiIGZpbGw9IiNFN0U2RTYiLz48cmVjdCB4PSIwLjUwMDA1MyIgeT0iNDI1LjUiIHdpZHRoPSIyNDYiIGhlaWdodD0iMTY3IiBzdHJva2U9IiMyRjUyOEYiIHN0cm9rZS13aWR0aD0iMS4zMzMzMyIgc3Ryb2tlLW1pdGVybGltaXQ9IjgiIGZpbGw9IiNFN0U2RTYiLz48cmVjdCB4PSIxNS41MDAxIiB5PSI0MzcuNSIgd2lkdGg9IjIxNSIgaGVpZ2h0PSI0MyIgc3Ryb2tlPSIjMkY1MjhGIiBzdHJva2Utd2lkdGg9IjEuMzMzMzMiIHN0cm9rZS1taXRlcmxpbWl0PSI4IiBmaWxsPSIjNDQ3MkM0Ii8+PHRleHQgZmlsbD0iI0ZGRkZGRiIgZm9udC1mYW1pbHk9IkNhbGlicmksQ2FsaWJyaV9NU0ZvbnRTZXJ2aWNlLHNhbnMtc2VyaWYiIGZvbnQtd2VpZ2h0PSI0MDAiIGZvbnQtc2l6ZT0iMjQiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDk1LjM1NjggNDY2KSI+ZGF0YV88L3RleHQ+PHJlY3QgeD0iMTUuNTAwMSIgeT0iNDg0LjUiIHdpZHRoPSIyMTUiIGhlaWdodD0iNDQiIHN0cm9rZT0iIzJGNTI4RiIgc3Ryb2tlLXdpZHRoPSIxLjMzMzMzIiBzdHJva2UtbWl0ZXJsaW1pdD0iOCIgZmlsbD0iIzQ0NzJDNCIvPjx0ZXh0IGZpbGw9IiNGRkZGRkYiIGZvbnQtZmFtaWx5PSJDYWxpYnJpLENhbGlicmlfTVNGb250U2VydmljZSxzYW5zLXNlcmlmIiBmb250LXdlaWdodD0iNDAwIiBmb250LXNpemU9IjI0IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg1OC42Njg2IDUxNCkiPmNhcGFjaXR5XzogMTA8L3RleHQ+PHJlY3QgeD0iMTUuNTAwMSIgeT0iNTMyLjUiIHdpZHRoPSIyMTUiIGhlaWdodD0iNDMiIHN0cm9rZT0iIzJGNTI4RiIgc3Ryb2tlLXdpZHRoPSIxLjMzMzMzIiBzdHJva2UtbWl0ZXJsaW1pdD0iOCIgZmlsbD0iIzQ0NzJDNCIvPjx0ZXh0IGZpbGw9IiNGRkZGRkYiIGZvbnQtZmFtaWx5PSJDYWxpYnJpLENhbGlicmlfTVNGb250U2VydmljZSxzYW5zLXNlcmlmIiBmb250LXdlaWdodD0iNDAwIiBmb250LXNpemU9IjI0IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg4Ni45MjE5IDU2MSkiPnNpemVfOiA0PC90ZXh0PjxwYXRoIGQ9Ik0xMDIuMDg5IDQ0NS41ODcgMTA2LjkxMyA0MzQuOTM2IDExMi4zMiA0MjQuNjI2IDExNS40MjQgNDE5LjY4NSAxMTguOTEgNDE0Ljk5NCAxMjIuODUxIDQxMC41NDUgMTI3LjM2MiA0MDYuNDc4IDEzMi4zMDEgNDAyLjc0MyAxMzcuNjY5IDM5OS4yNjkgMTQzLjM0NyAzOTYuMDUyIDE0OS40NjQgMzkzLjA4OCAxNTUuOTQ5IDM5MC4zODEgMTYyLjg2MyAzODcuODY2IDE3MC4wODQgMzg1LjU0MyAxNzcuNzQ2IDM4My4zNDUgMTg1LjkxMyAzODEuMzk4IDE5NC41NzUgMzc5LjcwMyAyMDMuNjA1IDM3OC4yNiAyMTMuMDY2IDM3Ny4wMDcgMjMyLjcxMiAzNzQuODE3IDI1MC45MzggMzczLjE4MSAyNTEuMTE3IDM3NS4xNzMgMjMyLjkwMiAzNzYuODA5IDIzMi45MjMgMzc2LjgwNiAyMTMuMjk4IDM3OC45OTQgMjEzLjMxOSAzNzguOTkxIDIwMy44ODEgMzgwLjI0MSAyMDMuOTA4IDM4MC4yMzcgMTk0LjkwOCAzODEuNjc1IDE5NC45NDIgMzgxLjY2OSAxODYuMzE3IDM4My4zNTYgMTg2LjM1NyAzODMuMzQ4IDE3OC4yMzIgMzg1LjI4NSAxNzguMjc2IDM4NS4yNzQgMTcwLjY1MSAzODcuNDYxIDE3MC42ODEgMzg3LjQ1MiAxNjMuNDk0IDM4OS43NjQgMTYzLjUyOSAzODkuNzUyIDE1Ni42NTQgMzkyLjI1MiAxNTYuNjk4IDM5Mi4yMzUgMTUwLjI2IDM5NC45MjMgMTUwLjMxMSAzOTQuOSAxNDQuMjQ5IDM5Ny44MzcgMTQ0LjMwNiAzOTcuODA4IDEzOC42ODEgNDAwLjk5NSAxMzguNzMxIDQwMC45NjUgMTMzLjQxOCA0MDQuNDAyIDEzMy40NzggNDA0LjM2IDEyOC42MDMgNDA4LjA0OCAxMjguNjcgNDA3Ljk5MyAxMjQuMjMyIDQxMS45OTMgMTI0LjMxMSA0MTEuOTEzIDEyMC40MzYgNDE2LjI4OCAxMjAuNDkgNDE2LjIyMiAxMTcuMDUzIDQyMC44NDcgMTE3LjA5NyA0MjAuNzgyIDExNC4wMzQgNDI1LjY1NyAxMTQuMDczIDQyNS41ODkgMTA4LjY5OCA0MzUuODM5IDEwOC43MjMgNDM1Ljc4OCAxMDMuOTExIDQ0Ni40MTNaTTI0My4wNjcgMzY5LjMzOSAyNTMuMDA1IDM3NCAyNDQuMDU2IDM4MC4zNTZDMjQzLjYwNiAzODAuNjc2IDI0Mi45ODIgMzgwLjU3IDI0Mi42NjIgMzgwLjEyIDI0Mi4zNDIgMzc5LjY2OSAyNDIuNDQ4IDM3OS4wNDUgMjQyLjg5OCAzNzguNzI1TDI1MC40NDkgMzczLjM2MiAyNTAuNjAzIDM3NS4wODIgMjQyLjIxOCAzNzEuMTVDMjQxLjcxOCAzNzAuOTE1IDI0MS41MDMgMzcwLjMyIDI0MS43MzcgMzY5LjgyIDI0MS45NzIgMzY5LjMyIDI0Mi41NjcgMzY5LjEwNSAyNDMuMDY3IDM2OS4zMzlaIi8+PHRleHQgZm9udC1mYW1pbHk9IkNvbnNvbGFzLENvbnNvbGFzX01TRm9udFNlcnZpY2Usc2Fucy1zZXJpZiIgZm9udC13ZWlnaHQ9IjQwMCIgZm9udC1zaXplPSIyNCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTQuMDEwMSA2MjEpIj5WZWN0b3ImbHQ7aW50Jmd0OyBsZWZ0OzwvdGV4dD48cmVjdCB4PSI4OTAuNSIgeT0iMzYwLjUiIHdpZHRoPSIyNiIgaGVpZ2h0PSIyNiIgc3Ryb2tlPSIjMkY1MjhGIiBzdHJva2Utd2lkdGg9IjEuMzMzMzMiIHN0cm9rZS1taXRlcmxpbWl0PSI4IiBmaWxsPSIjOTJEMDUwIi8+PHJlY3QgeD0iOTE2LjUiIHk9IjM2MC41IiB3aWR0aD0iMjYiIGhlaWdodD0iMjYiIHN0cm9rZT0iIzJGNTI4RiIgc3Ryb2tlLXdpZHRoPSIxLjMzMzMzIiBzdHJva2UtbWl0ZXJsaW1pdD0iOCIgZmlsbD0iIzkyRDA1MCIvPjxyZWN0IHg9Ijk0Mi41IiB5PSIzNjAuNSIgd2lkdGg9IjI3IiBoZWlnaHQ9IjI2IiBzdHJva2U9IiMyRjUyOEYiIHN0cm9rZS13aWR0aD0iMS4zMzMzMyIgc3Ryb2tlLW1pdGVybGltaXQ9IjgiIGZpbGw9IiM5MkQwNTAiLz48cmVjdCB4PSI5NjkuNSIgeT0iMzYwLjUiIHdpZHRoPSIyNiIgaGVpZ2h0PSIyNiIgc3Ryb2tlPSIjMkY1MjhGIiBzdHJva2Utd2lkdGg9IjEuMzMzMzMiIHN0cm9rZS1taXRlcmxpbWl0PSI4IiBmaWxsPSIjRTdFNkU2Ii8+PHJlY3QgeD0iOTk1LjUiIHk9IjM2MC41IiB3aWR0aD0iMjciIGhlaWdodD0iMjYiIHN0cm9rZT0iIzJGNTI4RiIgc3Ryb2tlLXdpZHRoPSIxLjMzMzMzIiBzdHJva2UtbWl0ZXJsaW1pdD0iOCIgZmlsbD0iI0U3RTZFNiIvPjxyZWN0IHg9IjEwMjIuNSIgeT0iMzYwLjUiIHdpZHRoPSIyNS45OTk5IiBoZWlnaHQ9IjI2IiBzdHJva2U9IiMyRjUyOEYiIHN0cm9rZS13aWR0aD0iMS4zMzMzMyIgc3Ryb2tlLW1pdGVybGltaXQ9IjgiIGZpbGw9IiNFN0U2RTYiLz48cmVjdCB4PSIxMDQ4LjUiIHk9IjM2MC41IiB3aWR0aD0iMjYiIGhlaWdodD0iMjYiIHN0cm9rZT0iIzJGNTI4RiIgc3Ryb2tlLXdpZHRoPSIxLjMzMzMzIiBzdHJva2UtbWl0ZXJsaW1pdD0iOCIgZmlsbD0iI0U3RTZFNiIvPjxyZWN0IHg9IjY0NC41IiB5PSI0MjUuNSIgd2lkdGg9IjI0NiIgaGVpZ2h0PSIxNjciIHN0cm9rZT0iIzJGNTI4RiIgc3Ryb2tlLXdpZHRoPSIxLjMzMzMzIiBzdHJva2UtbWl0ZXJsaW1pdD0iOCIgZmlsbD0iI0U3RTZFNiIvPjxyZWN0IHg9IjY1OS41IiB5PSI0MzcuNSIgd2lkdGg9IjIxNSIgaGVpZ2h0PSI0MyIgc3Ryb2tlPSIjMkY1MjhGIiBzdHJva2Utd2lkdGg9IjEuMzMzMzMiIHN0cm9rZS1taXRlcmxpbWl0PSI4IiBmaWxsPSIjNDQ3MkM0Ii8+PHRleHQgZmlsbD0iI0ZGRkZGRiIgZm9udC1mYW1pbHk9IkNhbGlicmksQ2FsaWJyaV9NU0ZvbnRTZXJ2aWNlLHNhbnMtc2VyaWYiIGZvbnQtd2VpZ2h0PSI0MDAiIGZvbnQtc2l6ZT0iMjQiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDczOS4xOSA0NjYpIj5kYXRhXzwvdGV4dD48cmVjdCB4PSI2NTkuNSIgeT0iNDg0LjUiIHdpZHRoPSIyMTUiIGhlaWdodD0iNDQiIHN0cm9rZT0iIzJGNTI4RiIgc3Ryb2tlLXdpZHRoPSIxLjMzMzMzIiBzdHJva2UtbWl0ZXJsaW1pdD0iOCIgZmlsbD0iIzQ0NzJDNCIvPjx0ZXh0IGZpbGw9IiNGRkZGRkYiIGZvbnQtZmFtaWx5PSJDYWxpYnJpLENhbGlicmlfTVNGb250U2VydmljZSxzYW5zLXNlcmlmIiBmb250LXdlaWdodD0iNDAwIiBmb250LXNpemU9IjI0IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg3MDguNTg1IDUxNCkiPmNhcGFjaXR5PHRzcGFuIGZvbnQtc2l6ZT0iMjQiIHg9IjgwLjEzMzQiIHk9IjAiPl86IDc8L3RzcGFuPjwvdGV4dD48cmVjdCB4PSI2NTkuNSIgeT0iNTMyLjUiIHdpZHRoPSIyMTUiIGhlaWdodD0iNDMiIHN0cm9rZT0iIzJGNTI4RiIgc3Ryb2tlLXdpZHRoPSIxLjMzMzMzIiBzdHJva2UtbWl0ZXJsaW1pdD0iOCIgZmlsbD0iIzQ0NzJDNCIvPjx0ZXh0IGZpbGw9IiNGRkZGRkYiIGZvbnQtZmFtaWx5PSJDYWxpYnJpLENhbGlicmlfTVNGb250U2VydmljZSxzYW5zLXNlcmlmIiBmb250LXdlaWdodD0iNDAwIiBmb250LXNpemU9IjI0IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg3MzAuNzU1IDU2MSkiPnNpemVfOiAzPC90ZXh0PjxwYXRoIGQ9Ik03NDYuMDg5IDQ0NS41ODcgNzUwLjkxNCA0MzQuOTM2IDc1Ni4zMiA0MjQuNjI2IDc1OS40MjQgNDE5LjY4NSA3NjIuOTEgNDE0Ljk5NCA3NjYuODUxIDQxMC41NDUgNzcxLjM2MiA0MDYuNDc4IDc3Ni4zMDEgNDAyLjc0MyA3ODEuNjY5IDM5OS4yNjkgNzg3LjM0NyAzOTYuMDUyIDc5My40NjQgMzkzLjA4OCA3OTkuOTQ5IDM5MC4zODEgODA2Ljg2MyAzODcuODY2IDgxNC4wODQgMzg1LjU0MyA4MjEuNzQ2IDM4My4zNDUgODI5LjkxMyAzODEuMzk4IDgzOC41NzUgMzc5LjcwMyA4NDcuNjA1IDM3OC4yNiA4NTcuMDY2IDM3Ny4wMDcgODc2LjcxMiAzNzQuODE3IDg5NC45MzggMzczLjE4MSA4OTUuMTE3IDM3NS4xNzMgODc2LjkwMiAzNzYuODA5IDg3Ni45MjMgMzc2LjgwNiA4NTcuMjk4IDM3OC45OTQgODU3LjMxOSAzNzguOTkxIDg0Ny44ODEgMzgwLjI0MSA4NDcuOTA4IDM4MC4yMzcgODM4LjkwOCAzODEuNjc1IDgzOC45NDIgMzgxLjY2OSA4MzAuMzE3IDM4My4zNTYgODMwLjM1NyAzODMuMzQ4IDgyMi4yMzIgMzg1LjI4NSA4MjIuMjc2IDM4NS4yNzQgODE0LjY1MSAzODcuNDYxIDgxNC42ODEgMzg3LjQ1MiA4MDcuNDk0IDM4OS43NjQgODA3LjUyOSAzODkuNzUyIDgwMC42NTQgMzkyLjI1MiA4MDAuNjk4IDM5Mi4yMzUgNzk0LjI2IDM5NC45MjMgNzk0LjMxMSAzOTQuOSA3ODguMjQ5IDM5Ny44MzcgNzg4LjMwNiAzOTcuODA4IDc4Mi42ODEgNDAwLjk5NSA3ODIuNzMxIDQwMC45NjUgNzc3LjQxOCA0MDQuNDAyIDc3Ny40NzggNDA0LjM2IDc3Mi42MDMgNDA4LjA0OCA3NzIuNjcgNDA3Ljk5MyA3NjguMjMyIDQxMS45OTMgNzY4LjMxMSA0MTEuOTEzIDc2NC40MzYgNDE2LjI4OCA3NjQuNDkgNDE2LjIyMiA3NjEuMDUzIDQyMC44NDcgNzYxLjA5NyA0MjAuNzgyIDc1OC4wMzQgNDI1LjY1NyA3NTguMDczIDQyNS41ODkgNzUyLjY5OCA0MzUuODM5IDc1Mi43MjMgNDM1Ljc4OCA3NDcuOTExIDQ0Ni40MTNaTTg4Ny4wNjcgMzY5LjMzOSA4OTcuMDA1IDM3NCA4ODguMDU2IDM4MC4zNTZDODg3LjYwNiAzODAuNjc2IDg4Ni45ODIgMzgwLjU3IDg4Ni42NjIgMzgwLjEyIDg4Ni4zNDIgMzc5LjY2OSA4ODYuNDQ4IDM3OS4wNDUgODg2Ljg5OCAzNzguNzI1TDg5NC40NDkgMzczLjM2MiA4OTQuNjAzIDM3NS4wODIgODg2LjIxOCAzNzEuMTVDODg1LjcxOCAzNzAuOTE1IDg4NS41MDMgMzcwLjMyIDg4NS43MzcgMzY5LjgyIDg4NS45NzIgMzY5LjMyIDg4Ni41NjcgMzY5LjEwNSA4ODcuMDY3IDM2OS4zMzlaIi8+PHRleHQgZm9udC1mYW1pbHk9IkNvbnNvbGFzLENvbnNvbGFzX01TRm9udFNlcnZpY2Usc2Fucy1zZXJpZiIgZm9udC13ZWlnaHQ9IjQwMCIgZm9udC1zaXplPSIyNCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoNjU3Ljg0MyA2MjEpIj5WZWN0b3ImbHQ7aW50Jmd0OyByaWdodDs8L3RleHQ+PHBhdGggZD0iTTAtMC4zMzMzMzMgMTM0LjA0OC0wLjMzMzMzMyAxMzQuMDQ4IDY0NC4xNjcgOC4wMDAwMyA2NDQuMTY3IDguMDAwMDMgNjQzLjUgMTMzLjcxNCA2NDMuNSAxMzMuMzgxIDY0My44MzMgMTMzLjM4MSAwIDEzMy43MTQgMC4zMzMzMzMgMCAwLjMzMzMzM1pNOS4zMzMzMyA2NDcuODMzIDEuMzMzMzMgNjQzLjgzMyA5LjMzMzMzIDYzOS44MzNaIiBmaWxsPSIjMDBCMDUwIiB0cmFuc2Zvcm09Im1hdHJpeCgtMS44MzY5N2UtMTYgLTEgLTEgMS44MzY5N2UtMTYgOTA0LjMzNCAzNjAuODMzKSIvPjxwYXRoIGQ9Ik0wLTAuMzMzMzMzIDEwNC4zMzMtMC4zMzMzMzMgMTA0LjMzMyA2NDQuMTY3IDcuOTk5OTkgNjQ0LjE2NyA3Ljk5OTk5IDY0My41IDEwNCA2NDMuNSAxMDMuNjY3IDY0My44MzMgMTAzLjY2NyAwIDEwNCAwLjMzMzMzMyAwIDAuMzMzMzMzWk05LjMzMzMzIDY0Ny44MzMgMS4zMzMzMyA2NDMuODMzIDkuMzMzMzMgNjM5LjgzM1oiIGZpbGw9IiMwMEIwNTAiIHRyYW5zZm9ybT0ibWF0cml4KC0xLjgzNjk3ZS0xNiAtMSAtMSAxLjgzNjk3ZS0xNiA5MzAuMzM0IDM2MC44MzMpIi8+PHBhdGggZD0iTTAtMC4zMzMzMzMgNzguMDQ3Ni0wLjMzMzMzMyA3OC4wNDc2IDY0NC4xNjcgNy45OTk5OSA2NDQuMTY3IDcuOTk5OTkgNjQzLjUgNzcuNzE0MiA2NDMuNSA3Ny4zODA5IDY0My44MzMgNzcuMzgwOSAwIDc3LjcxNDIgMC4zMzMzMzMgMCAwLjMzMzMzM1pNOS4zMzMzMyA2NDcuODMzIDEuMzMzMzMgNjQzLjgzMyA5LjMzMzMzIDYzOS44MzNaIiBmaWxsPSIjMDBCMDUwIiB0cmFuc2Zvcm09Im1hdHJpeCgtMS44MzY5N2UtMTYgLTEgLTEgMS44MzY5N2UtMTYgOTU2LjMzNCAzNjAuODMzKSIvPjx0ZXh0IGZvbnQtZmFtaWx5PSJDb25zb2xhcyxDb25zb2xhc19NU0ZvbnRTZXJ2aWNlLHNhbnMtc2VyaWYiIGZvbnQtd2VpZ2h0PSI0MDAiIGZvbnQtc2l6ZT0iMjQiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDQyOC43NDQgNjc4KSI+bGVmdCA9IHJpZ2h0OzwvdGV4dD48cGF0aCBkPSJNMzI2LjUyNSAzNjguODQ3IDMzMS44NDcgMzYzLjUyNSAzMzcuNSAzNjkuMTc4IDM0My4xNTMgMzYzLjUyNSAzNDguNDc1IDM2OC44NDcgMzQyLjgyMiAzNzQuNSAzNDguNDc1IDM4MC4xNTMgMzQzLjE1MyAzODUuNDc1IDMzNy41IDM3OS44MjIgMzMxLjg0NyAzODUuNDc1IDMyNi41MjUgMzgwLjE1MyAzMzIuMTc4IDM3NC41WiIgc3Ryb2tlPSIjMDAwMDAwIiBzdHJva2Utd2lkdGg9IjEuMzMzMzMiIHN0cm9rZS1taXRlcmxpbWl0PSI4IiBmaWxsPSIjRkYwMDAwIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiLz48L2c+PC9zdmc+" alt="image" /></p>

<ol>
<li>Размер вектора-источника больше или равен размеру вектора-приёмника. Тогда нужно присвоить существующим элементам приёмника значения соответствующих элементов источника, а оставшиеся скопировать в свободную область, используя функцию <code>uninitialized_copy</code> или <code>uninitialized_copy_n</code>.</li>
</ol>

<p><img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTE1NiIgaGVpZ2h0PSI1NzgiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIG92ZXJmbG93PSJoaWRkZW4iPjxkZWZzPjxjbGlwUGF0aCBpZD0iY2xpcDAiPjxyZWN0IHg9Ii0xIiB5PSIxMjEiIHdpZHRoPSIxMTU2IiBoZWlnaHQ9IjU3OCIvPjwvY2xpcFBhdGg+PC9kZWZzPjxnIGNsaXAtcGF0aD0idXJsKCNjbGlwMCkiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDEgLTEyMSkiPjxyZWN0IHg9IjI0Ni41IiB5PSIzNjAuNSIgd2lkdGg9IjI2IiBoZWlnaHQ9IjI2IiBzdHJva2U9IiMyRjUyOEYiIHN0cm9rZS13aWR0aD0iMS4zMzMzMyIgc3Ryb2tlLW1pdGVybGltaXQ9IjgiIGZpbGw9IiM0NDcyQzQiLz48cmVjdCB4PSIyNzIuNSIgeT0iMzYwLjUiIHdpZHRoPSIyNyIgaGVpZ2h0PSIyNiIgc3Ryb2tlPSIjMkY1MjhGIiBzdHJva2Utd2lkdGg9IjEuMzMzMzMiIHN0cm9rZS1taXRlcmxpbWl0PSI4IiBmaWxsPSIjNDQ3MkM0Ii8+PHJlY3QgeD0iMjk5LjUiIHk9IjM2MC41IiB3aWR0aD0iMjYiIGhlaWdodD0iMjYiIHN0cm9rZT0iIzJGNTI4RiIgc3Ryb2tlLXdpZHRoPSIxLjMzMzMzIiBzdHJva2UtbWl0ZXJsaW1pdD0iOCIgZmlsbD0iIzQ0NzJDNCIvPjxyZWN0IHg9IjMyNS41IiB5PSIzNjAuNSIgd2lkdGg9IjI2IiBoZWlnaHQ9IjI2IiBzdHJva2U9IiMyRjUyOEYiIHN0cm9rZS13aWR0aD0iMS4zMzMzMyIgc3Ryb2tlLW1pdGVybGltaXQ9IjgiIGZpbGw9IiM0NDcyQzQiLz48cmVjdCB4PSIzNTEuNSIgeT0iMzYwLjUiIHdpZHRoPSIyNyIgaGVpZ2h0PSIyNiIgc3Ryb2tlPSIjMkY1MjhGIiBzdHJva2Utd2lkdGg9IjEuMzMzMzMiIHN0cm9rZS1taXRlcmxpbWl0PSI4IiBmaWxsPSIjRTdFNkU2Ii8+PHJlY3QgeD0iMzc4LjUiIHk9IjM2MC41IiB3aWR0aD0iMjYiIGhlaWdodD0iMjYiIHN0cm9rZT0iIzJGNTI4RiIgc3Ryb2tlLXdpZHRoPSIxLjMzMzMzIiBzdHJva2UtbWl0ZXJsaW1pdD0iOCIgZmlsbD0iI0U3RTZFNiIvPjxyZWN0IHg9IjQwNC41IiB5PSIzNjAuNSIgd2lkdGg9IjI3IiBoZWlnaHQ9IjI2IiBzdHJva2U9IiMyRjUyOEYiIHN0cm9rZS13aWR0aD0iMS4zMzMzMyIgc3Ryb2tlLW1pdGVybGltaXQ9IjgiIGZpbGw9IiNFN0U2RTYiLz48cmVjdCB4PSI0MzEuNSIgeT0iMzYwLjUiIHdpZHRoPSIyNiIgaGVpZ2h0PSIyNiIgc3Ryb2tlPSIjMkY1MjhGIiBzdHJva2Utd2lkdGg9IjEuMzMzMzMiIHN0cm9rZS1taXRlcmxpbWl0PSI4IiBmaWxsPSIjRTdFNkU2Ii8+PHJlY3QgeD0iNDU3LjUiIHk9IjM2MC41IiB3aWR0aD0iMjYiIGhlaWdodD0iMjYiIHN0cm9rZT0iIzJGNTI4RiIgc3Ryb2tlLXdpZHRoPSIxLjMzMzMzIiBzdHJva2UtbWl0ZXJsaW1pdD0iOCIgZmlsbD0iI0U3RTZFNiIvPjxyZWN0IHg9IjQ4My41IiB5PSIzNjAuNSIgd2lkdGg9IjI3IiBoZWlnaHQ9IjI2IiBzdHJva2U9IiMyRjUyOEYiIHN0cm9rZS13aWR0aD0iMS4zMzMzMyIgc3Ryb2tlLW1pdGVybGltaXQ9IjgiIGZpbGw9IiNFN0U2RTYiLz48cmVjdCB4PSIwLjUwMDA1MyIgeT0iNDI1LjUiIHdpZHRoPSIyNDYiIGhlaWdodD0iMTY3IiBzdHJva2U9IiMyRjUyOEYiIHN0cm9rZS13aWR0aD0iMS4zMzMzMyIgc3Ryb2tlLW1pdGVybGltaXQ9IjgiIGZpbGw9IiNFN0U2RTYiLz48cmVjdCB4PSIxNS41MDAxIiB5PSI0MzcuNSIgd2lkdGg9IjIxNSIgaGVpZ2h0PSI0MyIgc3Ryb2tlPSIjMkY1MjhGIiBzdHJva2Utd2lkdGg9IjEuMzMzMzMiIHN0cm9rZS1taXRlcmxpbWl0PSI4IiBmaWxsPSIjNDQ3MkM0Ii8+PHRleHQgZmlsbD0iI0ZGRkZGRiIgZm9udC1mYW1pbHk9IkNhbGlicmksQ2FsaWJyaV9NU0ZvbnRTZXJ2aWNlLHNhbnMtc2VyaWYiIGZvbnQtd2VpZ2h0PSI0MDAiIGZvbnQtc2l6ZT0iMjQiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDk1LjM1NjggNDY2KSI+ZGF0YV88L3RleHQ+PHJlY3QgeD0iMTUuNTAwMSIgeT0iNDg0LjUiIHdpZHRoPSIyMTUiIGhlaWdodD0iNDQiIHN0cm9rZT0iIzJGNTI4RiIgc3Ryb2tlLXdpZHRoPSIxLjMzMzMzIiBzdHJva2UtbWl0ZXJsaW1pdD0iOCIgZmlsbD0iIzQ0NzJDNCIvPjx0ZXh0IGZpbGw9IiNGRkZGRkYiIGZvbnQtZmFtaWx5PSJDYWxpYnJpLENhbGlicmlfTVNGb250U2VydmljZSxzYW5zLXNlcmlmIiBmb250LXdlaWdodD0iNDAwIiBmb250LXNpemU9IjI0IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg1OC42Njg2IDUxNCkiPmNhcGFjaXR5XzogMTA8L3RleHQ+PHJlY3QgeD0iMTUuNTAwMSIgeT0iNTMyLjUiIHdpZHRoPSIyMTUiIGhlaWdodD0iNDMiIHN0cm9rZT0iIzJGNTI4RiIgc3Ryb2tlLXdpZHRoPSIxLjMzMzMzIiBzdHJva2UtbWl0ZXJsaW1pdD0iOCIgZmlsbD0iIzQ0NzJDNCIvPjx0ZXh0IGZpbGw9IiNGRkZGRkYiIGZvbnQtZmFtaWx5PSJDYWxpYnJpLENhbGlicmlfTVNGb250U2VydmljZSxzYW5zLXNlcmlmIiBmb250LXdlaWdodD0iNDAwIiBmb250LXNpemU9IjI0IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg4Ni45MjE5IDU2MSkiPnNpemVfOiA0PC90ZXh0PjxwYXRoIGQ9Ik0xMDIuMDg5IDQ0NS41ODcgMTA2LjkxMyA0MzQuOTM2IDExMi4zMiA0MjQuNjI2IDExNS40MjQgNDE5LjY4NSAxMTguOTEgNDE0Ljk5NCAxMjIuODUxIDQxMC41NDUgMTI3LjM2MiA0MDYuNDc4IDEzMi4zMDEgNDAyLjc0MyAxMzcuNjY5IDM5OS4yNjkgMTQzLjM0NyAzOTYuMDUyIDE0OS40NjQgMzkzLjA4OCAxNTUuOTQ5IDM5MC4zODEgMTYyLjg2MyAzODcuODY2IDE3MC4wODQgMzg1LjU0MyAxNzcuNzQ2IDM4My4zNDUgMTg1LjkxMyAzODEuMzk4IDE5NC41NzUgMzc5LjcwMyAyMDMuNjA1IDM3OC4yNiAyMTMuMDY2IDM3Ny4wMDcgMjMyLjcxMiAzNzQuODE3IDI1MC45MzggMzczLjE4MSAyNTEuMTE3IDM3NS4xNzMgMjMyLjkwMiAzNzYuODA5IDIzMi45MjMgMzc2LjgwNiAyMTMuMjk4IDM3OC45OTQgMjEzLjMxOSAzNzguOTkxIDIwMy44ODEgMzgwLjI0MSAyMDMuOTA4IDM4MC4yMzcgMTk0LjkwOCAzODEuNjc1IDE5NC45NDIgMzgxLjY2OSAxODYuMzE3IDM4My4zNTYgMTg2LjM1NyAzODMuMzQ4IDE3OC4yMzIgMzg1LjI4NSAxNzguMjc2IDM4NS4yNzQgMTcwLjY1MSAzODcuNDYxIDE3MC42ODEgMzg3LjQ1MiAxNjMuNDk0IDM4OS43NjQgMTYzLjUyOSAzODkuNzUyIDE1Ni42NTQgMzkyLjI1MiAxNTYuNjk4IDM5Mi4yMzUgMTUwLjI2IDM5NC45MjMgMTUwLjMxMSAzOTQuOSAxNDQuMjQ5IDM5Ny44MzcgMTQ0LjMwNiAzOTcuODA4IDEzOC42ODEgNDAwLjk5NSAxMzguNzMxIDQwMC45NjUgMTMzLjQxOCA0MDQuNDAyIDEzMy40NzggNDA0LjM2IDEyOC42MDMgNDA4LjA0OCAxMjguNjcgNDA3Ljk5MyAxMjQuMjMyIDQxMS45OTMgMTI0LjMxMSA0MTEuOTEzIDEyMC40MzYgNDE2LjI4OCAxMjAuNDkgNDE2LjIyMiAxMTcuMDUzIDQyMC44NDcgMTE3LjA5NyA0MjAuNzgyIDExNC4wMzQgNDI1LjY1NyAxMTQuMDczIDQyNS41ODkgMTA4LjY5OCA0MzUuODM5IDEwOC43MjMgNDM1Ljc4OCAxMDMuOTExIDQ0Ni40MTNaTTI0My4wNjcgMzY5LjMzOSAyNTMuMDA1IDM3NCAyNDQuMDU2IDM4MC4zNTZDMjQzLjYwNiAzODAuNjc2IDI0Mi45ODIgMzgwLjU3IDI0Mi42NjIgMzgwLjEyIDI0Mi4zNDIgMzc5LjY2OSAyNDIuNDQ4IDM3OS4wNDUgMjQyLjg5OCAzNzguNzI1TDI1MC40NDkgMzczLjM2MiAyNTAuNjAzIDM3NS4wODIgMjQyLjIxOCAzNzEuMTVDMjQxLjcxOCAzNzAuOTE1IDI0MS41MDMgMzcwLjMyIDI0MS43MzcgMzY5LjgyIDI0MS45NzIgMzY5LjMyIDI0Mi41NjcgMzY5LjEwNSAyNDMuMDY3IDM2OS4zMzlaIi8+PHRleHQgZm9udC1mYW1pbHk9IkNvbnNvbGFzLENvbnNvbGFzX01TRm9udFNlcnZpY2Usc2Fucy1zZXJpZiIgZm9udC13ZWlnaHQ9IjQwMCIgZm9udC1zaXplPSIyNCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTQuMDEwMSA2MjEpIj5WZWN0b3ImbHQ7aW50Jmd0OyBsZWZ0OzwvdGV4dD48cmVjdCB4PSI4OTAuNSIgeT0iMzYwLjUiIHdpZHRoPSIyNiIgaGVpZ2h0PSIyNiIgc3Ryb2tlPSIjMkY1MjhGIiBzdHJva2Utd2lkdGg9IjEuMzMzMzMiIHN0cm9rZS1taXRlcmxpbWl0PSI4IiBmaWxsPSIjOTJEMDUwIi8+PHJlY3QgeD0iOTE2LjUiIHk9IjM2MC41IiB3aWR0aD0iMjYiIGhlaWdodD0iMjYiIHN0cm9rZT0iIzJGNTI4RiIgc3Ryb2tlLXdpZHRoPSIxLjMzMzMzIiBzdHJva2UtbWl0ZXJsaW1pdD0iOCIgZmlsbD0iIzkyRDA1MCIvPjxyZWN0IHg9Ijk0Mi41IiB5PSIzNjAuNSIgd2lkdGg9IjI3IiBoZWlnaHQ9IjI2IiBzdHJva2U9IiMyRjUyOEYiIHN0cm9rZS13aWR0aD0iMS4zMzMzMyIgc3Ryb2tlLW1pdGVybGltaXQ9IjgiIGZpbGw9IiM5MkQwNTAiLz48cmVjdCB4PSI5NjkuNSIgeT0iMzYwLjUiIHdpZHRoPSIyNiIgaGVpZ2h0PSIyNiIgc3Ryb2tlPSIjMkY1MjhGIiBzdHJva2Utd2lkdGg9IjEuMzMzMzMiIHN0cm9rZS1taXRlcmxpbWl0PSI4IiBmaWxsPSIjOTJEMDUwIi8+PHJlY3QgeD0iOTk1LjUiIHk9IjM2MC41IiB3aWR0aD0iMjciIGhlaWdodD0iMjYiIHN0cm9rZT0iIzJGNTI4RiIgc3Ryb2tlLXdpZHRoPSIxLjMzMzMzIiBzdHJva2UtbWl0ZXJsaW1pdD0iOCIgZmlsbD0iIzkyRDA1MCIvPjxyZWN0IHg9IjEwMjIuNSIgeT0iMzYwLjUiIHdpZHRoPSIyNS45OTk5IiBoZWlnaHQ9IjI2IiBzdHJva2U9IiMyRjUyOEYiIHN0cm9rZS13aWR0aD0iMS4zMzMzMyIgc3Ryb2tlLW1pdGVybGltaXQ9IjgiIGZpbGw9IiM5MkQwNTAiLz48cmVjdCB4PSIxMDQ4LjUiIHk9IjM2MC41IiB3aWR0aD0iMjYiIGhlaWdodD0iMjYiIHN0cm9rZT0iIzJGNTI4RiIgc3Ryb2tlLXdpZHRoPSIxLjMzMzMzIiBzdHJva2UtbWl0ZXJsaW1pdD0iOCIgZmlsbD0iI0U3RTZFNiIvPjxyZWN0IHg9IjEwNzQuNSIgeT0iMzYwLjUiIHdpZHRoPSIyNyIgaGVpZ2h0PSIyNiIgc3Ryb2tlPSIjMkY1MjhGIiBzdHJva2Utd2lkdGg9IjEuMzMzMzMiIHN0cm9rZS1taXRlcmxpbWl0PSI4IiBmaWxsPSIjRTdFNkU2Ii8+PHJlY3QgeD0iMTEwMS41IiB5PSIzNjAuNSIgd2lkdGg9IjI2IiBoZWlnaHQ9IjI2IiBzdHJva2U9IiMyRjUyOEYiIHN0cm9rZS13aWR0aD0iMS4zMzMzMyIgc3Ryb2tlLW1pdGVybGltaXQ9IjgiIGZpbGw9IiNFN0U2RTYiLz48cmVjdCB4PSIxMTI3LjUiIHk9IjM2MC41IiB3aWR0aD0iMjciIGhlaWdodD0iMjYiIHN0cm9rZT0iIzJGNTI4RiIgc3Ryb2tlLXdpZHRoPSIxLjMzMzMzIiBzdHJva2UtbWl0ZXJsaW1pdD0iOCIgZmlsbD0iI0U3RTZFNiIvPjxyZWN0IHg9IjY0NC41IiB5PSI0MjUuNSIgd2lkdGg9IjI0NiIgaGVpZ2h0PSIxNjciIHN0cm9rZT0iIzJGNTI4RiIgc3Ryb2tlLXdpZHRoPSIxLjMzMzMzIiBzdHJva2UtbWl0ZXJsaW1pdD0iOCIgZmlsbD0iI0U3RTZFNiIvPjxyZWN0IHg9IjY1OS41IiB5PSI0MzcuNSIgd2lkdGg9IjIxNSIgaGVpZ2h0PSI0MyIgc3Ryb2tlPSIjMkY1MjhGIiBzdHJva2Utd2lkdGg9IjEuMzMzMzMiIHN0cm9rZS1taXRlcmxpbWl0PSI4IiBmaWxsPSIjNDQ3MkM0Ii8+PHRleHQgZmlsbD0iI0ZGRkZGRiIgZm9udC1mYW1pbHk9IkNhbGlicmksQ2FsaWJyaV9NU0ZvbnRTZXJ2aWNlLHNhbnMtc2VyaWYiIGZvbnQtd2VpZ2h0PSI0MDAiIGZvbnQtc2l6ZT0iMjQiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDczOS4xOSA0NjYpIj5kYXRhXzwvdGV4dD48cmVjdCB4PSI2NTkuNSIgeT0iNDg0LjUiIHdpZHRoPSIyMTUiIGhlaWdodD0iNDQiIHN0cm9rZT0iIzJGNTI4RiIgc3Ryb2tlLXdpZHRoPSIxLjMzMzMzIiBzdHJva2UtbWl0ZXJsaW1pdD0iOCIgZmlsbD0iIzQ0NzJDNCIvPjx0ZXh0IGZpbGw9IiNGRkZGRkYiIGZvbnQtZmFtaWx5PSJDYWxpYnJpLENhbGlicmlfTVNGb250U2VydmljZSxzYW5zLXNlcmlmIiBmb250LXdlaWdodD0iNDAwIiBmb250LXNpemU9IjI0IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg3MDIuNTAyIDUxNCkiPmNhcGFjaXR5XzogMTA8L3RleHQ+PHJlY3QgeD0iNjU5LjUiIHk9IjUzMi41IiB3aWR0aD0iMjE1IiBoZWlnaHQ9IjQzIiBzdHJva2U9IiMyRjUyOEYiIHN0cm9rZS13aWR0aD0iMS4zMzMzMyIgc3Ryb2tlLW1pdGVybGltaXQ9IjgiIGZpbGw9IiM0NDcyQzQiLz48dGV4dCBmaWxsPSIjRkZGRkZGIiBmb250LWZhbWlseT0iQ2FsaWJyaSxDYWxpYnJpX01TRm9udFNlcnZpY2Usc2Fucy1zZXJpZiIgZm9udC13ZWlnaHQ9IjQwMCIgZm9udC1zaXplPSIyNCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoNzMwLjc1NSA1NjEpIj5zaXplXzogNjwvdGV4dD48cGF0aCBkPSJNNzQ2LjA4OSA0NDUuNTg3IDc1MC45MTQgNDM0LjkzNiA3NTYuMzIgNDI0LjYyNiA3NTkuNDI0IDQxOS42ODUgNzYyLjkxIDQxNC45OTQgNzY2Ljg1MSA0MTAuNTQ1IDc3MS4zNjIgNDA2LjQ3OCA3NzYuMzAxIDQwMi43NDMgNzgxLjY2OSAzOTkuMjY5IDc4Ny4zNDcgMzk2LjA1MiA3OTMuNDY0IDM5My4wODggNzk5Ljk0OSAzOTAuMzgxIDgwNi44NjMgMzg3Ljg2NiA4MTQuMDg0IDM4NS41NDMgODIxLjc0NiAzODMuMzQ1IDgyOS45MTMgMzgxLjM5OCA4MzguNTc1IDM3OS43MDMgODQ3LjYwNSAzNzguMjYgODU3LjA2NiAzNzcuMDA3IDg3Ni43MTIgMzc0LjgxNyA4OTQuOTM4IDM3My4xODEgODk1LjExNyAzNzUuMTczIDg3Ni45MDIgMzc2LjgwOSA4NzYuOTIzIDM3Ni44MDYgODU3LjI5OCAzNzguOTk0IDg1Ny4zMTkgMzc4Ljk5MSA4NDcuODgxIDM4MC4yNDEgODQ3LjkwOCAzODAuMjM3IDgzOC45MDggMzgxLjY3NSA4MzguOTQyIDM4MS42NjkgODMwLjMxNyAzODMuMzU2IDgzMC4zNTcgMzgzLjM0OCA4MjIuMjMyIDM4NS4yODUgODIyLjI3NiAzODUuMjc0IDgxNC42NTEgMzg3LjQ2MSA4MTQuNjgxIDM4Ny40NTIgODA3LjQ5NCAzODkuNzY0IDgwNy41MjkgMzg5Ljc1MiA4MDAuNjU0IDM5Mi4yNTIgODAwLjY5OCAzOTIuMjM1IDc5NC4yNiAzOTQuOTIzIDc5NC4zMTEgMzk0LjkgNzg4LjI0OSAzOTcuODM3IDc4OC4zMDYgMzk3LjgwOCA3ODIuNjgxIDQwMC45OTUgNzgyLjczMSA0MDAuOTY1IDc3Ny40MTggNDA0LjQwMiA3NzcuNDc4IDQwNC4zNiA3NzIuNjAzIDQwOC4wNDggNzcyLjY3IDQwNy45OTMgNzY4LjIzMiA0MTEuOTkzIDc2OC4zMTEgNDExLjkxMyA3NjQuNDM2IDQxNi4yODggNzY0LjQ5IDQxNi4yMjIgNzYxLjA1MyA0MjAuODQ3IDc2MS4wOTcgNDIwLjc4MiA3NTguMDM0IDQyNS42NTcgNzU4LjA3MyA0MjUuNTg5IDc1Mi42OTggNDM1LjgzOSA3NTIuNzIzIDQzNS43ODggNzQ3LjkxMSA0NDYuNDEzWk04ODcuMDY3IDM2OS4zMzkgODk3LjAwNSAzNzQgODg4LjA1NiAzODAuMzU2Qzg4Ny42MDYgMzgwLjY3NiA4ODYuOTgyIDM4MC41NyA4ODYuNjYyIDM4MC4xMiA4ODYuMzQyIDM3OS42NjkgODg2LjQ0OCAzNzkuMDQ1IDg4Ni44OTggMzc4LjcyNUw4OTQuNDQ5IDM3My4zNjIgODk0LjYwMyAzNzUuMDgyIDg4Ni4yMTggMzcxLjE1Qzg4NS43MTggMzcwLjkxNSA4ODUuNTAzIDM3MC4zMiA4ODUuNzM3IDM2OS44MiA4ODUuOTcyIDM2OS4zMiA4ODYuNTY3IDM2OS4xMDUgODg3LjA2NyAzNjkuMzM5WiIvPjx0ZXh0IGZvbnQtZmFtaWx5PSJDb25zb2xhcyxDb25zb2xhc19NU0ZvbnRTZXJ2aWNlLHNhbnMtc2VyaWYiIGZvbnQtd2VpZ2h0PSI0MDAiIGZvbnQtc2l6ZT0iMjQiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDY1Ny44NDMgNjIxKSI+VmVjdG9yJmx0O2ludCZndDsgcmlnaHQ7PC90ZXh0PjxwYXRoIGQ9Ik0wLTAuMzMzMzMzIDIzOS4xOTEtMC4zMzMzMzMgMjM5LjE5MSA2NDQuMTY3IDguMDAwMDIgNjQ0LjE2NyA4LjAwMDAyIDY0My41IDIzOC44NTcgNjQzLjUgMjM4LjUyNCA2NDMuODMzIDIzOC41MjQgMCAyMzguODU3IDAuMzMzMzMzIDAgMC4zMzMzMzNaTTkuMzMzMzMgNjQ3LjgzMyAxLjMzMzMzIDY0My44MzMgOS4zMzMzMyA2MzkuODMzWiIgZmlsbD0iIzAwQjA1MCIgdHJhbnNmb3JtPSJtYXRyaXgoLTEuODM2OTdlLTE2IC0xIC0xIDEuODM2OTdlLTE2IDkwNC4zMzQgMzYwLjgzMykiLz48cGF0aCBkPSJNMC0wLjMzMzMzMyAyMTAuNjE5LTAuMzMzMzMzIDIxMC42MTkgNjQ0LjE2NyA4LjAwMDAzIDY0NC4xNjcgOC4wMDAwMyA2NDMuNSAyMTAuMjg2IDY0My41IDIwOS45NTIgNjQzLjgzMyAyMDkuOTUyIDAgMjEwLjI4NiAwLjMzMzMzMyAwIDAuMzMzMzMzWk05LjMzMzMzIDY0Ny44MzMgMS4zMzMzMyA2NDMuODMzIDkuMzMzMzMgNjM5LjgzM1oiIGZpbGw9IiMwMEIwNTAiIHRyYW5zZm9ybT0ibWF0cml4KC0xLjgzNjk3ZS0xNiAtMSAtMSAxLjgzNjk3ZS0xNiA5MzAuMzM0IDM2MC44MzMpIi8+PHBhdGggZD0iTTAtMC4zMzMzMzMgMTg2LjYxOS0wLjMzMzMzMyAxODYuNjE5IDY0NC4xNjcgOC4wMDAwMyA2NDQuMTY3IDguMDAwMDMgNjQzLjUgMTg2LjI4NiA2NDMuNSAxODUuOTUyIDY0My44MzMgMTg1Ljk1MiAwIDE4Ni4yODYgMC4zMzMzMzMgMCAwLjMzMzMzM1pNOS4zMzMzMyA2NDcuODMzIDEuMzMzMzMgNjQzLjgzMyA5LjMzMzMzIDYzOS44MzNaIiBmaWxsPSIjMDBCMDUwIiB0cmFuc2Zvcm09Im1hdHJpeCgtMS44MzY5N2UtMTYgLTEgLTEgMS44MzY5N2UtMTYgOTU2LjMzNCAzNjAuODMzKSIvPjxwYXRoIGQ9Ik0wLTAuMzMzMzMzIDE2MC4zMzMtMC4zMzMzMzMgMTYwLjMzMyA2NDQuMTY3IDcuOTk5NzUgNjQ0LjE2NyA3Ljk5OTc1IDY0My41IDE2MCA2NDMuNSAxNTkuNjY3IDY0My44MzMgMTU5LjY2NyAwIDE2MCAwLjMzMzMzMyAwIDAuMzMzMzMzWk05LjMzMzMzIDY0Ny44MzMgMS4zMzMzMyA2NDMuODMzIDkuMzMzMzMgNjM5LjgzM1oiIGZpbGw9IiMwMEIwNTAiIHRyYW5zZm9ybT0ibWF0cml4KC0xLjgzNjk3ZS0xNiAtMSAtMSAxLjgzNjk3ZS0xNiA5ODMuMzM0IDM2MC44MzMpIi8+PHBhdGggZD0iTTAtMC4zMzMzMzMgMTExLjE5LTAuMzMzMzMzIDExMS4xOSA2NDQuMTY3IDcuOTk5OTMgNjQ0LjE2NyA3Ljk5OTkzIDY0My41IDExMC44NTcgNjQzLjUgMTEwLjUyNCA2NDMuODMzIDExMC41MjQgMCAxMTAuODU3IDAuMzMzMzMzIDAgMC4zMzMzMzNaTTkuMzMzMzMgNjQ3LjgzMyAxLjMzMzMzIDY0My44MzMgOS4zMzMzMyA2MzkuODMzWiIgZmlsbD0iI0ZGMDAwMCIgdHJhbnNmb3JtPSJtYXRyaXgoLTEuODM2OTdlLTE2IC0xIC0xIDEuODM2OTdlLTE2IDEwMDkuMzMgMzYwLjgzMykiLz48cGF0aCBkPSJNMC0wLjMzMzMzMyA4NC45MDQ4LTAuMzMzMzMzIDg0LjkwNDggNjQ0LjE2NyA3Ljk5OTk5IDY0NC4xNjcgNy45OTk5OSA2NDMuNSA4NC41NzE0IDY0My41IDg0LjIzODEgNjQzLjgzMyA4NC4yMzgxIDAgODQuNTcxNCAwLjMzMzMzMyAwIDAuMzMzMzMzWk05LjMzMzMzIDY0Ny44MzMgMS4zMzMzMyA2NDMuODMzIDkuMzMzMzMgNjM5LjgzM1oiIGZpbGw9IiNGRjAwMDAiIHRyYW5zZm9ybT0ibWF0cml4KC0xLjgzNjk3ZS0xNiAtMSAtMSAxLjgzNjk3ZS0xNiAxMDM2LjMzIDM2MC44MzMpIi8+PHRleHQgZm9udC1mYW1pbHk9IkNvbnNvbGFzLENvbnNvbGFzX01TRm9udFNlcnZpY2Usc2Fucy1zZXJpZiIgZm9udC13ZWlnaHQ9IjQwMCIgZm9udC1zaXplPSIyNCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoNDI4Ljc0NCA2NzgpIj5sPHRzcGFuIGZvbnQtc2l6ZT0iMjQiIHg9IjEzLjE2NjciIHk9IjAiPmVmdCA9PC90c3Bhbj48dHNwYW4gZm9udC1zaXplPSIyNCIgeD0iOTIuMTY2NiIgeT0iMCI+cmlnaHQ8L3RzcGFuPjx0c3BhbiBmb250LXNpemU9IjI0IiB4PSIxNTgiIHk9IjAiPjs8L3RzcGFuPjwvdGV4dD48L2c+PC9zdmc+" alt="image" /></p>

<p>Проанализируем решение на предмет безопасности исключений. Вспомним, какие гарантии безопасности исключений бывают:</p>

<ul>
<li>Базовая гарантия. Если возникает исключение, состояние программы остаётся согласованным, нет утечки памяти и других ресурсов.</li>
<li>Строгая гарантия. Исключение не влияет на состояние приложения. То есть помимо базовых гарантий обеспечивается транзакционное выполнение операции.</li>
<li>Гарантия отсутствия исключений. Операция ни при каких условиях не будет генерировать исключений.</li>
</ul>

<hr>

<p>Какую гарантию безопасности исключений обеспечивает операция присваивания, которая реализует описанный выше алгоритм?</p>

<ul>
<li><p>Базовая гарантия безопасности исключений.</p></li>

<li><p>Строгая гарантия безопасности исключений.</p></li>

<li><p>Гарантия отсутствия исключений</p></li>
</ul>

<hr>

<p>Из-за частичного отказа от идиомы copy-and-swap операция присваивания обеспечивает лишь базовую гарантию безопасности исключений. Такие же гарантии даёт оператор присваивания в классе <code>std::vector</code>. Тем не менее у программиста остаётся возможность применить эту идиому явно, если задача требует строгой гарантии безопасности исключений.</p>

</body>
</html>
